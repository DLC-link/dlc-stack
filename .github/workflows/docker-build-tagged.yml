name: Build docker

on:
  push:
    tags:
      - v[0-9]*

jobs:
  build-tagged:
    name: Build Image
    runs-on: ubuntu-latest
    steps:
        - name: Check out code
          uses: actions/checkout@v3
        - name: Build and push docker image
          uses: mr-smithers-excellent/docker-build-push@v6
          with:
            image: dlc-link-stack
            registry: ${{ secrets.TF_AWS_ACCOUNT_NUMBER }}.dkr.ecr.us-east-1.amazonaws.com
            addLatest: false
          env:
            AWS_ACCESS_KEY_ID: ${{ secrets.TF_AWS_ACCESS_KEY_ID }}
            AWS_SECRET_ACCESS_KEY: ${{ secrets.TF_AWS_SECRET_ACCESS_KEY }}
